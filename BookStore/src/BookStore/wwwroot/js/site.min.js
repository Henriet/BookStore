$(document).ready(function(){$("#submit").click(function(){var o=$("#Name").val(),e=$("#ISBN").val(),t=$("#Author").val(),n=JSON.stringify({Name:o,ISBN:e,Author:t});$.ajax({type:"POST",url:window.location.protocol+"//"+window.location.host+"/api/Books",data:n,contentType:"application/json",success:function(){window.location.replace(window.location.protocol+"//"+window.location.host+"/Books")},error:function(){alert("Something went wrong :(")}})})}),$(document).ready(function(){$("#submit").click(function(){var o=$("#Name").val();console.log(o),$.ajax({type:"POST",url:window.location.protocol+"//"+window.location.host+"/api/Categories",data:JSON.stringify(o),contentType:"application/json",success:function(){window.location.replace(window.location.protocol+"//"+window.location.host+"/Categories")},error:function(){alert("Something went wrong :(")}})})}),$(document).ready(function(){var o={Name:ko.observable(""),ISBN:ko.observable(""),Author:ko.observable(""),SelectedCategories:ko.observableArray([]),Id:ko.observable(""),AllCategories:ko.observableArray([])},e=function(o,e){this.Name=o,this.Id=e};o.UploadAllCategories=ko.computed(function(){var o=this,t=$("#Id").val();$.ajax({type:"GET",url:window.location.protocol+"//"+window.location.host+"/api/Categories/",success:function(n){for(var a=0;a<n.length;a++)o.AllCategories.push(new e(n[a].Name,n[a].Id));$.ajax({type:"GET",url:window.location.protocol+"//"+window.location.host+"/api/Books/"+t,success:function(e){o.Name(e.Name),o.ISBN(e.ISBN),o.Id(e.Id),o.Author(e.Author);for(var t=0;t<e.Categories.length;t++)o.SelectedCategories.push(e.Categories[t].Id)},error:function(){alert("Something went wrong :(")}})},error:function(){alert("Something went wrong :(")}})},o),o.Update=function(){for(var t=this,n=o.SelectedCategories(),a=[],r=0;r<n.length;r++)a.push(new e("",n[r]));var i=JSON.stringify({Id:t.Id(),Name:t.Name(),ISBN:t.ISBN(),Author:t.Author(),Categories:a,CategoriesList:""});console.log(i),$.ajax({type:"PUT",url:window.location.protocol+"//"+window.location.host+"/api/Books",data:i,contentType:"application/json",success:function(){window.location.replace(window.location.protocol+"//"+window.location.host+"/Books")},error:function(){alert("Something went wrong :(")}})},ko.applyBindings(o)}),$(document).ready(function(){var o={Name:ko.observable(""),CreationDate:ko.observable(""),Books:ko.observableArray([]),Id:ko.observable("")};o.UploadData=ko.computed(function(){var o=this,e=$("#Id").val();$.ajax({type:"GET",url:window.location.protocol+"//"+window.location.host+"/api/Categories/"+e,success:function(e){o.Name(e.Name),o.CreationDate(e.CreationDate),o.Id(e.Id);for(var t=0;t<e.length;t++)o.books.push({Name:e[t].Name,Id:e[t].Id})},error:function(){alert("Something went wrong :(")}})},o),o.Update=function(){var o=this,e=JSON.stringify({Id:o.Id(),Name:o.Name()});console.log(e),$.ajax({type:"PUT",url:window.location.protocol+"//"+window.location.host+"/api/Categories",data:e,contentType:"application/json",success:function(){window.location.replace(window.location.protocol+"//"+window.location.host+"/Categories")},error:function(){alert("Something went wrong :(")}})},ko.applyBindings(o)}),$(document).ready(function(){var o=function(){var o=this;o.items=ko.observableArray([]),o.Delete=function(t){new e(t,o)},$.ajax({type:"GET",url:"api/Books",success:function(e){for(var t=0;t<e.length;t++)o.items.push({Name:e[t].Name,Id:e[t].Id,ISBN:e[t].ISBN,Author:e[t].Author,Categories:e[t].CategoriesList});return e},error:function(o){alert("Something went wrong :(")}})};ko.applyBindings(new o);var e=function(o,e){$.ajax({type:"DELETE",url:"api/Books/"+o.Id,success:function(){e.items.remove(o)},error:function(){alert("Something went wrong :(")}})}}),$(document).ready(function(){var o={items:ko.observableArray([])};o.GetCategories=ko.computed(function(){var o=this;$.ajax({type:"GET",url:"api/Categories",success:function(e){for(var t=0;t<e.length;t++)o.items.push({Name:e[t].Name,Id:e[t].Id,CreationDate:e[t].CreationDate});return e},error:function(){alert("Something went wrong :(")}})},o),o.Delete=function(e){var t=o;$.ajax({type:"DELETE",url:"api/Categories/"+e.Id,success:function(){t.items.remove(e)},error:function(){alert("Something went wrong :(")}})},ko.applyBindings(o)}),$(document).ready(function(){var o={items:ko.observableArray([])};o.GetCategories=ko.computed(function(){var o=this;$.ajax({type:"GET",url:"api/Report",success:function(e){for(var t=0;t<e.length;t++)o.items.push({Name:e[t].CategoryName,Count:e[t].CountOfBooks});return e},error:function(){alert("Something went wrong :(")}})},o),ko.applyBindings(o)});